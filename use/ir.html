<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IR gateway | OpenMQTTGateway test3</title>
    <meta name="generator" content="VuePress 1.5.1">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
    <link rel="icon" href="/img/Openmqttgateway_logo_mini.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="One gateway, many technologies: MQTT gateway for ESP8266, ESP32, Sonoff RF Bridge or Arduino with bidirectional 433mhz/315mhz/868mhz, Infrared communications, BLE, beacons detection, mi flora / mi jia / LYWSD02/ Mi Scale compatibility, SMS & LORA.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.b3ea4d25.css" as="style"><link rel="preload" href="/assets/js/app.74797193.js" as="script"><link rel="preload" href="/assets/js/2.f718821c.js" as="script"><link rel="preload" href="/assets/js/35.1f20509b.js" as="script"><link rel="prefetch" href="/assets/js/10.28019e78.js"><link rel="prefetch" href="/assets/js/11.33885281.js"><link rel="prefetch" href="/assets/js/12.14fc3006.js"><link rel="prefetch" href="/assets/js/13.f94931e2.js"><link rel="prefetch" href="/assets/js/14.cd576fe1.js"><link rel="prefetch" href="/assets/js/15.08d3e98a.js"><link rel="prefetch" href="/assets/js/16.9798a34e.js"><link rel="prefetch" href="/assets/js/17.24193801.js"><link rel="prefetch" href="/assets/js/18.608aa415.js"><link rel="prefetch" href="/assets/js/19.22966f07.js"><link rel="prefetch" href="/assets/js/20.9049eb02.js"><link rel="prefetch" href="/assets/js/21.1b9a1950.js"><link rel="prefetch" href="/assets/js/22.17be7254.js"><link rel="prefetch" href="/assets/js/23.323c15ad.js"><link rel="prefetch" href="/assets/js/24.be12ebae.js"><link rel="prefetch" href="/assets/js/25.3e8be3de.js"><link rel="prefetch" href="/assets/js/26.4c0e2190.js"><link rel="prefetch" href="/assets/js/27.ab51d8d1.js"><link rel="prefetch" href="/assets/js/28.1b654a60.js"><link rel="prefetch" href="/assets/js/29.1197e6de.js"><link rel="prefetch" href="/assets/js/3.0578e82d.js"><link rel="prefetch" href="/assets/js/30.9e484caa.js"><link rel="prefetch" href="/assets/js/31.eaa0457a.js"><link rel="prefetch" href="/assets/js/32.4ce06745.js"><link rel="prefetch" href="/assets/js/33.7d86bad1.js"><link rel="prefetch" href="/assets/js/34.40f3c320.js"><link rel="prefetch" href="/assets/js/36.fe350e03.js"><link rel="prefetch" href="/assets/js/37.e9fc6184.js"><link rel="prefetch" href="/assets/js/4.173fdd30.js"><link rel="prefetch" href="/assets/js/5.c8c92234.js"><link rel="prefetch" href="/assets/js/6.3e346492.js"><link rel="prefetch" href="/assets/js/7.a4e90884.js"><link rel="prefetch" href="/assets/js/8.a76c7beb.js"><link rel="prefetch" href="/assets/js/9.d55e90bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b3ea4d25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">OpenMQTTGateway test3</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" rel="" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://docs.google.com/spreadsheets/d/1_5fQjAixzRtepkykmL-3uN3G5bLfQ0zMajM9OBZ1bx0/edit#gid=2126158079" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://1technophile.blogspot.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/" class="nav-link">
  Docs
</a></div><div class="nav-item"><a href="https://community.openmqttgateway.com" target="_self" rel="" class="nav-link external">
  Community
  <!----></a></div><div class="nav-item"><a href="https://docs.google.com/spreadsheets/d/1_5fQjAixzRtepkykmL-3uN3G5bLfQ0zMajM9OBZ1bx0/edit#gid=2126158079" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Devices
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/1technophile/OpenMQTTGateway" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">0 - What is it for 🏠</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1 - Prerequisites🧭</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2 - Set it up 🔨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3 - Upload ➡️</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>4 - Use ✈️</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/use/rf.html" class="sidebar-link">RF gateways  (433mhz/315mhz)</a></li><li><a href="/use/ble.html" class="sidebar-link">BLE gateway</a></li><li><a href="/use/ir.html" aria-current="page" class="active sidebar-link">IR gateway</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/use/ir.html#receiving-data-from-ir-signal" class="sidebar-link">Receiving data from IR signal</a></li><li class="sidebar-sub-header"><a href="/use/ir.html#send-data-by-mqtt-to-convert-it-on-ir-signal" class="sidebar-link">Send data by MQTT to convert it on IR signal</a></li><li class="sidebar-sub-header"><a href="/use/ir.html#send-data-by-mqtt-from-global-cache-database-to-convert-it-on-ir-signal" class="sidebar-link">Send data by MQTT from Global Caché database to convert it on IR signal</a></li><li class="sidebar-sub-header"><a href="/use/ir.html#send-data-by-mqtt-with-advanced-ir-parameters" class="sidebar-link">Send data by MQTT with advanced IR parameters</a></li><li class="sidebar-sub-header"><a href="/use/ir.html#send-raw-ir-data-by-mqtt" class="sidebar-link">Send raw IR data by MQTT</a></li><li class="sidebar-sub-header"><a href="/use/ir.html#repeat-the-ir-signal-openmqttgateway-receive" class="sidebar-link">Repeat the IR signal OpenMQTTGateway receive</a></li></ul></li><li><a href="/use/lora.html" class="sidebar-link">LORA gateway</a></li><li><a href="/use/gsm.html" class="sidebar-link">GSM 2G gateway</a></li><li><a href="/use/rfm69.html" class="sidebar-link">RFM69 gateway</a></li><li><a href="/use/sensors.html" class="sidebar-link">Sensors</a></li><li><a href="/use/actuators.html" class="sidebar-link">Actuators</a></li><li><a href="/use/boards.html" class="sidebar-link">Boards</a></li><li><a href="/use/gateway.html" class="sidebar-link">System commands (ESP only)</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5 - Integrate 🎉</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6 - Participate 💻</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ir-gateway"><a href="#ir-gateway" class="header-anchor">#</a> IR gateway</h1> <p>There is two methods for finding the IR codes you want to replicate:</p> <ol><li>Point the remote control to an IR receiver see <a href="#receiving-data-from-ir-signal">Receiving data from IR signal</a> &amp; <a href="#send-data-by-mqtt-to-convert-it-on-ir-signal">Send data by MQTT to convert it on IR signal</a></li> <li>Find the code corresponding to your devices with IR global cache database https://irdb.globalcache.com/ see <a href="#send-data-by-mqtt-from-global-cach%C3%A9-database-to-convert-it-on-ir-signal">Send data by MQTT from Global cache database to convert it on IR signal</a></li></ol> <p>Here is the <a href="https://docs.google.com/spreadsheets/d/1rTDZIG8rm0dSf4vP7HdTdM4-aRY1nDWH4jK28_WRwHQ/edit?usp=sharing" target="_blank" rel="noopener noreferrer">List of protocols<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> supported by OMG, even if your device brand is not in the list you can still use raw IR data or GlobalCache database.</p> <h2 id="receiving-data-from-ir-signal"><a href="#receiving-data-from-ir-signal" class="header-anchor">#</a> Receiving data from IR signal</h2> <p>Subscribe to all the messages with mosquitto or open your MQTT client software:
<code>mosquitto_sub -t +/# -v</code>
And press your IR remote control in front of the receiver led you should see the following messages for example:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>home/OpenMQTTGateway/IRtoMQTT {&quot;value&quot;:875849879,&quot;protocol&quot;:7,&quot;protocol_name&quot;:SAMSUNG,&quot;bits&quot;:32,&quot;raw&quot;:&quot;4534,4432,612,518,614,516,616,1618,618,1616,618,512,618,1618,608,524,612,518,616,514,618,512,616,1618,616,1618,618,514,616,1618,616,514,616,514,618,512,616,1618,618,1618,618,514,610,1622,616,514,618,514,614,516,616,1618,618,512,618,512,618,1616,550,580,618,1616,612,1624,618,1616,618&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>With an hexadecimal value:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{&quot;value&quot;:9938405643,&quot;protocol&quot;:55,&quot;bits&quot;:35,&quot;hex&quot;:&quot;0x25060090B&quot;,&quot;protocol_name&quot;:&quot;TECO&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>To receive big dump of raw data you need first to modify the <a href="https://github.com/1technophile/OpenMQTTGateway/blob/091b317660fd201a30e2cd0e15424a13c5a6bd71/config_IR.h#L41" target="_blank" rel="noopener noreferrer">config_IR.h<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and uncomment DumpMode true</p> <p>Unknown protocols are filtered by default, if you want to see the unknown protocols set into <a href="https://github.com/1technophile/OpenMQTTGateway/blob/master/config_IR.h" target="_blank" rel="noopener noreferrer">config_IR.h<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>#define pubIRunknownPrtcl true</code> instead of false</p> <p><img src="https://github.com/1technophile/OpenMQTTGateway/blob/master/img/OpenMQTTGateway_serial3.jpg" alt=""></p> <p>You can take this code and try to reproduce it with the gateway either by using <a href="#send-data-by-mqtt-to-convert-it-on-ir-signal">decimal value</a> or the <a href="#send-raw-ir-data-by-mqtt">raw value</a>.</p> <h2 id="send-data-by-mqtt-to-convert-it-on-ir-signal"><a href="#send-data-by-mqtt-to-convert-it-on-ir-signal" class="header-anchor">#</a> Send data by MQTT to convert it on IR signal</h2> <p>With the IR gateway you need to put on the topic the protocol_name you want to use to send the signal, the different protocols implemented are <a href="https://github.com/crankyoldgit/IRremoteESP8266/blob/f9d7e5c622670132731e3f9c64d9132128eb320c/src/IRremoteESP8266.h#L299" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Exhaustive list <a href="https://docs.google.com/spreadsheets/d/1_5fQjAixzRtepkykmL-3uN3G5bLfQ0zMajM9OBZ1bx0/edit#gid=1910001295" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>For example if I want to send a command to a sony TV you can use the following command:</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;value&quot;:551489775,&quot;protocol_name&quot;:&quot;SONY&quot;}'</code></p> <p>The code after the -m represent the payload you want to send.</p> <p>You could alternatively use an hex value (bits is the number of hexadecimal values):
<code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;hex&quot;:&quot;0x250600090B&quot;,&quot;bits&quot;:5,&quot;protocol_name&quot;:&quot;TECO&quot;}'</code></p> <p>or</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;hex&quot;:&quot;0xA6BCF20040600020000000000519&quot;,&quot;bits&quot;:14,&quot;protocol_name&quot;:&quot;HAIER_AC_YRW02&quot;}'</code></p> <p>If you don’t want to use special parameters for IR just use value key, the protocol per default is NEC</p> <p><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;value&quot;:551489775}'</code></p> <p>NOTE: on arduino Uno most of the protocols are not enable per default due to memory constraints (it is not the case for MEGA), to enable them go to <a href="https://github.com/1technophile/OpenMQTTGateway/blob/master/main/User_config.h" target="_blank" rel="noopener noreferrer">user_config.h<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and uncomment the #define corresponding the protocols you want:</p> <div class="language-C++ line-numbers-mode"><pre class="language-text"><code>//#define IR_COOLIX
//#define IR_Whynter
//#define IR_LG
//#define IR_Sony
//#define IR_DISH
//#define IR_RC5
//#define IR_Sharp
#define IR_SAMSUNG
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="send-data-by-mqtt-from-global-cache-database-to-convert-it-on-ir-signal"><a href="#send-data-by-mqtt-from-global-cache-database-to-convert-it-on-ir-signal" class="header-anchor">#</a> Send data by MQTT from Global Caché database to convert it on IR signal</h2> <p>The website https://irdb.globalcache.com/ contains an important database of IR codes of various devices brand. By registering and asking the code you will receive a code as the example below:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>code1: sendir,1:1,1,38000,1,69,340,169,20,20,20,20,20,64,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,64,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,1544,340,85,20,3663
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Extract this part of the code:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>38000,1,69,340,169,20,20,20,20,20,64,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,64,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,64,20,64,20,64,20,64,20,64,20,64,20,1544,340,85,20,3663
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and publish it to mqtt with the a subject containing IR_GC:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;raw&quot;:&quot;38000,1,1,171,171,21,64,21,21,21,21,21,21,21,21,21,21,21,21,21,64,21,64,21,21,21,21,21,21,21,21,21,21,21,21,21,64,21,21,21,21,21,21,21,64,21,21,21,21,21,21,21,21,21,64,21,64,21,64,21,21,21,64,21,64,21,64,21,64,21,1114&quot;,&quot;protocol_name&quot;:&quot;GC&quot;}'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>You should be able to command your devices without having listened with the IR receiver or if your protocol is unknown by the IRremote library</p> <h2 id="send-data-by-mqtt-with-advanced-ir-parameters"><a href="#send-data-by-mqtt-with-advanced-ir-parameters" class="header-anchor">#</a> Send data by MQTT with advanced IR parameters</h2> <p>IR sending support two advanced parameters; bits length and repeat number.</p> <p>The example below will send the following advanced parameters bits: 14 and repeat:4 times for a sony protocol:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;value&quot;:551489775,&quot;protocol_name&quot;:&quot;NEC&quot;,&quot;repeat&quot;:4,&quot;bits&quot;:14}'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="send-raw-ir-data-by-mqtt"><a href="#send-raw-ir-data-by-mqtt" class="header-anchor">#</a> Send raw IR data by MQTT</h2> <ol start="2"><li><p>If you use an arduino UNO enable <code>IR_Raw</code> by uncommenting the line 129 in user_config.h
<code>#define IR_Raw</code>
If you are using the uno you will have to comment other gateway like ZgatewayRF, ZgatewayBT and ZgatewayIR to keep enough memory</p></li> <li><p>publish your code like below</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mosquitto_pub -t home/OpenMQTTGateway/commands/MQTTtoIR -m '{&quot;raw&quot;:&quot;8850,4450,600,550,550,550,600,1600,600,550,600,500,600,500,600,550,600,500,600,1650,600,1600,600,550,600,1600,600,1650,600,1600,600,1650,600,1600,600,550,600,500,600,550,550,1650,600,500,600,550,600,500,600,550,550,1650,600,1650,550,1650,600,550,550,1650,600,1650,550,1650,600,1650,600&quot;,&quot;protocol_name&quot;:&quot;Raw&quot;}'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>With big raw array you may cross the limit of default payload size. In this case the gateway will not receive the message or will not send it to the broker.
In this case the best way is to use hex values instead, but if you can't you may change the parameters below:
In user_config.h replace:
<code>#define JSON_MSG_BUFFER 512</code>
by
<code>#define JSON_MSG_BUFFER 1280</code></p> <p>And into platformio.ini
<code>MQTT_MAX_PACKET_SIZE=1024</code>
by
<code>MQTT_MAX_PACKET_SIZE=1280</code></p> <h2 id="repeat-the-ir-signal-openmqttgateway-receive"><a href="#repeat-the-ir-signal-openmqttgateway-receive" class="header-anchor">#</a> Repeat the IR signal OpenMQTTGateway receive</h2> <p>So as to repeat the IR signal received by the gateway once set the following parameter to true in <a href="https://github.com/1technophile/OpenMQTTGateway/blob/091b317660fd201a30e2cd0e15424a13c5a6bd71/config_IR.h#L37" target="_blank" rel="noopener noreferrer">config_IR.h<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <code>#define repeatIRwMQTT true</code></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/1technophile/OpenMQTTGateway/edit/development/docs/use/ir.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/12/2020, 10:07:17 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/use/ble.html" class="prev">
        BLE gateway
      </a></span> <span class="next"><a href="/use/lora.html">
        LORA gateway
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.74797193.js" defer></script><script src="/assets/js/2.f718821c.js" defer></script><script src="/assets/js/35.1f20509b.js" defer></script>
  </body>
</html>
